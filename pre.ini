[script]
n0=alias -l setautofiles {
n1=  if $isfile(AutoTimeToday.txt) { var %x 1 | while ($read(AutoTimeToday.txt,%x)) { $+(.timer,$v1) off | inc %x } }
n2=  if $isfile(AutoTimeToday.txt) {  echo 4 -a * Auto 10-Minute-Prior TV Show Announcer Has Been Turned On!
n3=    var %x 1 | while ($read(AutoTimeToday.txt,%x)) { $+(.timer,$v1) $v1 1 1 .play $+(-t,$v1) # AutoShowToday.txt | inc %x } 
n4=  }
n5=}
n6=;**********************************************************************************************************************************
n7=on *:sockopen:tvqauto:{
n8=  var %tvqauto sockwrite -n tvqauto
n9=  %tvqauto GET /tools/quickschedule.php HTTP/1.1
n10=  %tvqauto Host: services.tvrage.com
n11=  %tvqauto $crlf
n12=}
n13=;**********************************************************************************************************************************
n14=on *:sockread:tvqauto:{ var %tvqinfoauto | sockread %tvqinfoauto
n15=  ;**********************************************************************************************************************************
n16=  if $regex(%tvqinfoauto,/\[TIME\](.*)\[\/TIME\]/i) { set -u7 %sTiME $asctime($ctime($date $regml(1)),HH:nn)
n17=    var %time $asctime($calc($ctime($date $regml(1)) - 600),HH:nn)
n18=    write AutoShowToday.txt $+([,%time,])
n19=    write AutoShowToday.txt 5Airing in the next 10 minutes ->
n20=    write AutoTimeToday.txt %time
n21=  }
n22=  ;**********************************************************************************************************************************
n23=  elseif $regex(%tvqinfoauto,/\[SHOW\](.*)\[\/SHOW\]/i) {
n24=    ;**********************************************************************************************************************************
n25=    set -u3 %tvqinfoauto_NetW $remove($mid(%tvqinfoauto,$pos(%tvqinfoauto,]),$calc($pos(%tvqinfoauto,^,1) -$pos(%tvqinfoauto,],1))),])
n26=    set -u3 %tvqinfoauto_TiTLE $remove($mid(%tvqinfoauto,$pos(%tvqinfoauto,^,1),$calc($pos(%tvqinfoauto,^,2) -$pos(%tvqinfoauto,^,1))),^)
n27=    set -u3 %tvqinfoauto_EP $remove($mid(%tvqinfoauto,$pos(%tvqinfoauto,^,2),$calc($pos(%tvqinfoauto,^,3) -$pos(%tvqinfoauto,^,2))),^)
n28=    set -u3 %tvqinfoauto_LiNK $remove($mid(%tvqinfoauto,$pos(%tvqinfoauto,^,3),$calc($pos(%tvqinfoauto,[,2) -$pos(%tvqinfoauto,^,3))),^)
n29=    ;**********************************************************************************************************************************
n30=    ;*** Output / How it spits out the iNFO
n31=    set -u3 %tvqinfoauto_SHOW $iif(%sTiME,$+(4,[14,$v1,4])) $+(14,%tvqinfoauto_TiTLE,) 14-4#14- $+(14,$replace(%tvqinfoauto_EP,x,15x14),) 14-4#14- $+(14,%tvqinfoauto_NetW,) $+(,$chr(40),14,%tvqinfoauto_LiNK,,$chr(41),)
n32=    ;**********************************************************************************************************************************
n33=    write AutoShowToday.txt %tvqinfoauto_SHOW
n34=  }
n35=  ;**********************************************************************************************************************************
n36=  elseif $regex(%tvqinfoauto,/\[DAY\](.*)\[\/DAY\]/i) { write AutoShowToday.txt $regml(1) 
n37=    write $+(-d,$lines(AutoShowToday.txt)) AutoShowToday.txt
n38=    if (($date(dd) = 30 && $chr(44) 31 !isin %xauto)) { set %xauto , 01 }
n39=    $iif(%xauto isin %tvqinfoauto,sockclose tvqauto) 
n40=  }
n41=  ;**********************************************************************************************************************************
n42=}
n43=menu * {
n44=  -
n45=  Enable Auto Announcer {
n46=    $iif($isfile(AutoTimeToday.txt),write -c AutoTimeToday.txt)
n47=    $iif($isfile(AutoShowToday.txt),write -c AutoShowToday.txt)
n48=    sock $+ $iif($sock(tvqauto),close,open) tvqauto services.tvrage.com 80
n49=    if ($date(dd) = 31) set -u5 %xauto , 01
n50=    else {
n51=      set -u5 %xauto $right($date(dd),1) 
n52=      set -u5 %xauto $+($left($date(mm),1),$calc(%xauto +1))
n53=      .timerxauto 1 1 setautofiles
n54=    }
n55=  }
n56=  Disable Auto Announcer {
n57=    if $isfile(AutoTimeToday.txt) { echo 4 -a * Auto Announcer Has Been Switched Off!
n58=      var %x 1 | while ($read(AutoTimeToday.txt,%x)) { $+(.timer,$v1) off | inc %x }
n59=      $iif($isfile(AutoShowToday.txt),.remove AutoShowToday.txt)
n60=      $iif($isfile(AutoTimeToday.txt),.remove AutoTimeToday.txt)
n61=    }
n62=  }
n63=  -
n64=}
n65=	
